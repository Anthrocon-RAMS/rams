{% extends 'hotel_lottery/room_lottery_form.html' %}

{% block hotel_ranking %}{% endblock %}

{% block last_step_js %}
if (step == 5) {
    $('#suite-lottery-form').submit();
}
{% endblock %}

{% block room_type_ranking_desc %}
<p>
    {% if read_only %}Below are your selected {{ room_text }} types in order of preference.
    {% else %}
    Rank your choice of {{ room_text }} type by clicking and dragging rooms from "Available" to "Selected" in order of preference.
    At least one selection is required.
    {% endif %}
</p>
{% endblock %}

{% block priorities_form %}
{{ form_macros.form_input(room_or_suite_lottery.shared_fields['selection_priorities'], readonly=read_only) }}

{% if not read_only and application.room_step <= steps.counter %}
<div class="row justify-content-end">
    <div class="col col-auto">
        <button type="submit" id="step-{{ steps.counter }}-submit" class="btn btn-primary" name="room_step" value="{{ steps.counter }}">Save and Continue</button>
    </div>
</div>
{% endif %}
{% endblock %}

{% block terms %}
{% if not read_only %}
<div class="accordion-item">
    <h3 class="accordion-header" id="step-{{ steps.counter }}-header">
        <button class="accordion-button{% if steps.counter != 1 %} collapsed{% endif %}" disabled type="button" id="step-{{ steps.counter }}-button" data-bs-toggle="collapse" data-bs-target="#step-{{ steps.counter }}" aria-expanded="true" aria-controls="step-{{ steps.counter }}">
            Step {{ steps.counter }}: {{ room_text.title() }} Agreement
        </button>
    </h3>
    <div id="step-{{ steps.counter }}" class="accordion-collapse collapse{% if steps.counter == 1 %} show{% endif %}" aria-labelledby="step-{{ steps.counter }}-header">
        <div class="accordion-body">
            {% block terms_desc %}{% endblock %}
            {% block terms_form %}
            <div class="row g-sm-3">
                <div class="col-12">
                    <strong>{{ form_macros.form_input(room_or_suite_lottery.suite_terms_accepted) }}</strong>
                </div>
            </div>

            {% if not read_only and application.room_step <= steps.counter %}
            <div class="row justify-content-end">
                <div class="col col-auto">
                    <button type="submit" id="step-{{ steps.counter }}-submit" class="btn btn-primary" name="room_step" value="{{ steps.counter }}">Save and Complete Entry</button>
                </div>
            </div>
            {% endif %}
            {% endblock %}
        </div>
    </div>
</div>
{% if steps.update({'counter': steps.counter + 1}) %}{% endif %}
{% endif %}
{% endblock %}