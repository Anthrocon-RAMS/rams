{% extends "./preregistration/preregbase.html" %}
{% set title_text = "Hotel Lottery Application" %}
{% import 'macros.html' as macros with context %}
{% import 'forms/macros.html' as form_macros with context %}
{% set lottery_info = lottery_info or forms['lottery_info'] %}
{% set room_lottery = room_lottery or forms['room_lottery'] %}
{% set suite_lottery = suite_lottery or forms['suite_lottery'] %}

{% block content %}

<script src="https://raw.githack.com/SortableJS/Sortable/master/Sortable.js"></script>

<style>
    ul {
        list-style: none;
        padding: 0;
    }
    .choice {
        outline: auto;
        margin: 5px;
        padding: 2px;
    }
    .choice-name {
        font-size: 20pt;
        font-weight: bold;
    }
    .choice-description {

    }
    .choice-list {
        padding: 20px;
        min-height: 100px;
        background: #eee;
    }
    .sortable-ghost {
        opacity: 0.6;
    }
    .chosen {
        opacity: 1;
    }
</style>

<script type="text/javascript">
    var setStep = function () {}

    var submitAndContinue = function () {}

    $().ready(function () {
        {% if application.terms_accepted %}
        $('#select-action').show();
        {% else %}
        $('#start').show();
        {% endif %}
    })
</script>

<h1>{{ c.EVENT_NAME }} Hotel Lottery</h1>
<div class="card">
  <div class="card-body">
    {{ form_macros.form_validation('hotel-lottery-form', 'validate_hotel_lottery') }}
    <div id="start" class="collapse">
        <h2>Welcome to the {{ c.EVENT_NAME_AND_YEAR }} Hotel Lottery</h2>
        <p><img src="../static/theme/logo.png"></p>
        <p>
            Hello and welcome to the {{ c.EVENT_YEAR }} {{ c.EVENT_NAME }} room lottery!
            Before you get started, please note that there's no need to rush, as your time of entry has absolutely no bearing on the lottery results.
            Take your time and read the instructions carefully, as the rules outlined in the steps ahead are binding on all entries.
            If you get stuck, don't hesitate to reach out to {{ c.HOTEL_LOTTERY_EMAIL|email_only|email_to_link }} with any questions.
        </p>

        <p>
            Note: Your entry is not complete until you reach the last ("confirmation") page.
        </p>

        <p>
            If you close your browser before you finish or are unable to complete the entry process for any reason, you may return at any time while the lottery is still open and start again.
        </p>

        <p>
            Once your entry is complete, you'll receive an email with the entry details. You can return to this page at any time to edit your entry, manage a room group, or join or leave a room group.
        </p>

        <p><button type="button" class="btn btn-primary">Continue</button></p>
    </div>

    <div id="lottery-tos" class="collapse">
    {% include 'hotel_lottery/lottery_tos.html' %}

    <form novalidate method="post" id="hotel-lottery-form" action="form?id={{ id }}">
        {{ form_macros.form_input(lottery_info.terms_accepted) }}
    </form>

    <button type="button" class="btn btn-primary">Continue</button>
    </div>

        <div id="select-action" class="collapse">
            <h2>Lottery Options</h2>
            <p>You currently {{ application.current_status_str }}.</p>

            <p>
                <button type="button" class="btn btn-info">View Terms of Service</button>
                {% if application.parent_application %}
                <button type="button" class="btn btn-danger">Leave Room Group</button>
                {% else %}
                <button type="button" class="btn btn-primary">Join Room Group</button>
                <button type="button" class="btn btn-secondary">
                    {{ "Edit Room Lottery Entry" if application.wants_room else "Enter Room Lottery" }}
                </button>
                <button type="button" class="btn btn-success">
                    {{ "Edit Suite Lottery Entry" if application.wants_room else "Enter Suite Lottery" }}
                </button>
                {% endif %}
            </p>
        </div>

        <div id="join-group" class="collapse">
        <h1>Group Information</h1>
        <p>For the best chance at getting a room you and your friends can group your applications together.</p>
        <p>To combine your applications only the group leader needs to fill out this form. They will then receive invite codes to distribute to everyone else.</p>
        <div class="row g-sm-3">
            <div class="col-12 col-sm-6">{{ form_macros.form_input(lottery_info.application_group_name) }}</div>
            <div class="col-12 col-sm-6">{{ form_macros.form_input(lottery_info.public_attendee_name) }}</div>
        </div>
        </div>

        <div id="room-lottery" class="collapse">
        <h1>Standard Room Lottery</h1>
        <p>If you wish to enter the hotel room lottery for a standard hotel room fill out this section.</p>
        {{ form_macros.form_input(room_lottery.wants_room) }}
        <div class="row g-sm-3">
            <div class="col-12 col-sm-6">{{ form_macros.form_input(room_lottery.application_group_name) }}</div>
        </div>
        {{ form_macros.form_input(room_lottery.hotel_preference) }}
        <h2>When would you like to check IN?</h2>
        <div class="row g-sm-3">
            <div class="col-12 col-sm-6">{{ form_macros.form_input(room_lottery.earliest_room_checkin_date) }}</div>
            <div class="col-12 col-sm-6">{{ form_macros.form_input(room_lottery.latest_room_checkin_date) }}</div>
        </div>
        <h2>When would you like to check OUT?</h2>
        <div class="row g-sm-3">
            <div class="col-12 col-sm-6">{{ form_macros.form_input(room_lottery.earliest_room_checkout_date) }}</div>
            <div class="col-12 col-sm-6">{{ form_macros.form_input(room_lottery.latest_room_checkout_date) }}</div>
        </div>
        {{ form_macros.form_input(room_lottery.room_type_preference) }}
        <h2>Priorities</h2>
        <p>Rank the following from most important to least important for you.</p>
        {{ form_macros.form_input(room_lottery.room_selection_priorities) }}
        </div>

        <div id="suite-lottery" class="collapse">
        <h1>Suite Lottery</h1>
        <p>If you wish to enter the suite lottery fill out this section.</p>
        {{ form_macros.form_input(suite_lottery.wants_suite) }}
        <h2>When would you like to check IN?</h2>
        <div class="row g-sm-3">
            <div class="col-12 col-sm-6">{{ form_macros.form_input(suite_lottery.earliest_suite_checkin_date) }}</div>
            <div class="col-12 col-sm-6">{{ form_macros.form_input(suite_lottery.latest_suite_checkin_date) }}</div>
        </div>
        <h2>When would you like to check OUT?</h2>
        <div class="row g-sm-3">
            <div class="col-12 col-sm-6">{{ form_macros.form_input(suite_lottery.earliest_suite_checkout_date) }}</div>
            <div class="col-12 col-sm-6">{{ form_macros.form_input(suite_lottery.latest_suite_checkout_date) }}</div>
        </div>
        {{ form_macros.form_input(suite_lottery.suite_type_preference) }}

        <h2>Priorities</h2>
        <p>Rank the following from most important to least important for you.</p>
        {{ form_macros.form_input(suite_lottery.suite_selection_priorities) }}
        {{ csrf_token() }}
        </div>
        <button type="submit" class="btn btn-primary" value="Upload">Save</button>
    </form>
  </div>
</div>
{% endblock %}
