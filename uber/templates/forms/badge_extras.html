{% import 'macros.html' as macros with context %}
{% import 'forms/macros.html' as form_macros with context %}
{% set prereg_merch_available = True or c.PREREG_DONATION_OPTS and c.PREREG_DONATION_OPTS|length > 1 %}

{{ badge_extras.badge_type }}
{% if c.BADGE_TYPE_PRICES %}
{% endif %}

{{ badge_extras.amount_extra }}
{% if c.DONATIONS_ENABLED and (prereg_merch_available or attendee.amount_extra) %}
<div class="row g-3">
{{ form_macros.card_select(badge_extras.amount_extra, c.FORMATTED_DONATION_DESCRIPTIONS_EXCLUSIVE)}}
</div>
{{ form_macros.toggle_fields_js(badge_extras.amount_extra, [badge_extras.shirt], off_values=["0"], toggle_required=True) }}
{% endif %}

{% if prereg_merch_available or attendee.gets_any_kind_of_shirt %}
<div class="row g-3">
    <div class="col">{{ form_macros.form_input(badge_extras.shirt) }}</div>
</div>
{% endif %}

{% if c.COLLECT_EXTRA_DONATION %}
<div class="row g-3">
    <div class="col">{{ form_macros.form_input(badge_extras.extra_donation, readonly=extra_donation_ro or money_fields_ro or page_ro) }}</div>

    {% if not admin_area %}
    <div class="col">
        <div class="alert alert-warning" role="alert">
        <strong>This donation <em>is not a kick-in</em> and does not come with merchandise.</strong><br/>
        {{ c.ORGANIZATION_NAME }} is a 501(c)(3) charitable organization, and additional donations may be tax deductible.
        Your employer may also have a charitable donation matching program. E-mail contact@magfest.org for details.
        </div>
    </div>
    {% endif %}

    {% if c.EXTRA_DONATION_URL %}
    <div class="col">If you're interested in kicking in an extra donation, you can{% if c.COLLECT_EXTRA_DONATION %} also{% endif %} do so at any time of year at <a href="{{ c.EXTRA_DONATION_URL }}" target="_blank">{{ c.EXTRA_DONATION_URL }}</a>!</div>
    {% endif %}
</div>
{% endif %}