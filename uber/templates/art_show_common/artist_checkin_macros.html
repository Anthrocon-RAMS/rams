{% import 'macros.html' as macros with context %}

{%- macro check_in_form(app, printable=not admin_area) -%}
{% if printable %}
<style>
  tr td,
  th {
    padding: 2px !important;
    margin: 2px !important;
  }
</style>
<span{% if printable and not checkout %} style="font-size: 125%;" {% endif %}>

  <input type="hidden" name="app_id" value="{{ app.id }}" />

  <!-- Signature Section-->

  <!-- Row 1 -->

  <div class="row g-sm-3 p-0">
    <div class="col text-start">
      <label style="font-size: 0.85rem;" class="form-text">Artist Name</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.artist_name or app.attendee.full_name }}</div>
    </div>
    <div class="col text-center">
      <label style="font-size: 0.85rem;" class="form-text">Location(s)</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.locations }}</div>
    </div>
    <div class="col text-end">
      <label style="font-size: 0.85rem;" class="form-text">Banner Name</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.banner_name or app.artist_name or app.attendee.full_name }}
      </div>
    </div>
  </div>


  <!-- Row 2 -->

  <div class="row g-sm-3 p-0">
    <div class="col-9 col-sm-9">
      <label style="font-size: 0.85rem;" class="form-text">Agent Notes</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.agent_notes }}</div>
    </div>
    <div class="col text-end">
      <label style="font-size: 0.85rem;" class="form-text">Artist ID</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.artist_id }}</div>
    </div>
  </div>


  <!-- Row 3 -->

  <div class="row g-sm-3 p-0">
    <div class="col text-start">
      <label style="font-size: 0.85rem;" class="form-text">Artist Phone</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.attendee.cellphone }}</div>
    </div>
    <div class="col text-center">
      <label style="font-size: 0.85rem;" class="form-text">Artist Email</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.attendee.email }}</div>
    </div>
    <div class="col text-end">
      <label style="font-size: 0.85rem;" class="form-text">Banner Name (Mature)</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.banner_name_ad or app.banner_name or app.artist_name or
        app.attendee.full_name }}</div>
    </div>
  </div>

  <!-- Row 4 -->

  <div class="row g-sm-3 p-0">
    <div class="col-9 col-sm-9">
      <label style="font-size: 0.85rem;" class="form-text">Contact Info At-Con</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.contact_at_con }}</div>
    </div>
    <div class="col text-end">
      <label style="font-size: 0.85rem;" class="form-text">Artist Mature ID</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.artist_id_ad or app.artist_id }}</div>
    </div>
  </div>


  <!-- Row 5 -->

  <div class="row g-sm-3 p-0">
    <div class="col text-start">
      <label style="font-size: 0.85rem;" class="form-text">Artist Full Name</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.attendee.full_name }}</div>
    </div>
    <div class="col text-end">
      <label style="font-size: 0.85rem;" class="form-text">Name on Check</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.check_payable }}</div>
    </div>
  </div>


  <!-- Row 6 -->

  <div class="row g-sm-3 p-0">
    <div class="col text-start">
      <label style="font-size: 0.85rem;" class="form-text">Mailing Street</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.address1 }}</div>
    </div>
    <div class="col text-center">
      <label style="font-size: 0.85rem;" class="form-text">Mailing Street Line 2</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.address2 }}</div>
    </div>
    <div class="col text-end">
      <label style="font-size: 0.85rem;" class="form-text">Mailing City</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.city }}</div>
    </div>
  </div>

  <!-- Row 7 -->

  <div class="row g-sm-3 p-0">
    <div class="col text-start">
      <label style="font-size: 0.85rem;" class="form-text">State/Region</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.region }}</div>
    </div>
    <div class="col text-center">
      <label style="font-size: 0.85rem;" class="form-text">ZIP/Postal Code</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.zip_code }}</div>
    </div>
    <div class="col text-end">
      <label style="font-size: 0.85rem;" class="form-text">Country</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.country }}</div>
    </div>
  </div>

  <strong style="font-size: 0.85rem;">{% include "art_show_applications/checkin_agreement.html" %}</strong>

  {% if app.delivery_method == c.AGENT %}
  <div class="row g-sm-3">
    <div class="col-12 col-sm-6">
      <label class="form-text">Agent Name: &nbsp;&nbsp;&nbsp; {{ app.single_agent.legal_first_name }} {{
        app.single_agent.legal_last_name }}</label>
    </div>
  </div>

  <div class="row g-sm-3">
    <div class="col-12 col-sm-6">
      <label class="form-text">Agent Signature</label>
      <div class="mb-3 mt-3">
        ____________________________________________________________
      </div>
    </div>

    <div class="col-12 col-sm-6">
      <label class="form-text">Date</label>
      <div class="mb-3 mt-3">
        ______________________________
      </div>
    </div>
  </div>
  {% else %}
  <div class="row g-sm-3">
    <div class="col-12 col-sm-6">
      <div class="form-text">Artist Name: &nbsp;&nbsp;&nbsp; {{ app.attendee.full_name }}</div>
    </div>
  </div>

  <div class="row g-sm-3">
    <div class="col-12 col-sm-6">
      <label class="form-text">Artist Signature</label>
      <div class="mb-3 mt-3">
        ____________________________________________________________
      </div>
    </div>

    <div class="col-12 col-sm-6">
      <label class="form-text">Date</label>
      <div class="mb-3 mt-3">
        ______________________________
      </div>
    </div>
  </div>
  {% endif %}

  <span class="text-center pagebreak"></span>

  <!-- Runner Section-->

  <!-- Row 1 -->

  <div class="row g-sm-3 p-0">
    <div class="col text-start">
      <label style="font-size: 0.85rem;" class="form-text">Artist Name</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.artist_name or app.attendee.full_name }}</div>
    </div>
    <div class="col text-center">
      <label style="font-size: 0.85rem;" class="form-text">Location(s)</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.locations }}</div>
    </div>
    <div class="col text-end">
      <label style="font-size: 0.85rem;" class="form-text">Banner Name</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.banner_name or app.artist_name or app.attendee.full_name }}
      </div>
    </div>
  </div>

  <!-- Row 2 -->

  <div class="row g-sm-3 p-0">
    <div class="col text-start">
      <label style="font-size: 0.85rem;" class="form-text">Piece Stats</label>
      <div style="font-size: 1.1rem;">
        {{ app.art_show_pieces|length }} Total |
        {{ app.num_pieces_gallery(c.GENERAL) }} in General
        {% if app.num_pieces_gallery(c.MATURE) > 0 %}
        | {{ app.num_pieces_gallery(c.MATURE) }} in Mature
        {% endif %}
      </div>
    </div>
    <div class="col text-end">
      <label style="font-size: 0.85rem;" class="form-text">Banner Name (Mature)</label>
      <div style="font-size: 1.1rem;" class="mb-3">{{ app.banner_name_ad or app.banner_name or app.artist_name or
        app.attendee.full_name }}</div>
    </div>
  </div>

  <div class="table-responsive{% if printable and not checkout %} mt-3 mb-3{% endif %}">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>ID</th>
          <th>Status</th>
          <th>Gallery</th>
          <th>Name</th>
          <th>Min. Bid</th>
          <th>After Closing</th>
        </tr>
      </thead>
      <tbody>
        {% for piece in app.art_show_pieces|sort(attribute='piece_id')|sort(attribute='gallery_label') %}
        <tr class="piece-row" data-piece_id="{{ piece.piece_id }}">
          <td data-order="{{ piece.piece_id }}"> {{ piece.artist_and_piece_id }} <input type="hidden"
              name="piece_ids{{ app.id }}" value="{{ piece.id }}" /> </td>
          <td data-order="{{ piece.status_label }}">{{ piece.status_label }}</td>
          <td width="115px" data-order="{{ piece.gallery_label }}">{{ piece.gallery_label }}</td>
          <td data-order="{{ piece.name }}"> {{ piece.name|wordwrap(25, wrapstring="<br />"|safe) }}</td>
          <td data-order="{{ piece.opening_bid }}">{{ '$' ~ piece.opening_bid if piece.valid_for_sale else "N/A" }}</td>
          <td data-order="{{ piece.quick_sale_price }}">{{ '$' ~ piece.quick_sale_price if piece.valid_quick_sale else
            "N/A" }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <div class="row g-sm-3">
    <div class="col-12 col-sm-6">
      <label class="form-text">Checked By (Print Name)</label>
      <div class="mb-3 mt-3">
        ____________________________________________________________
      </div>
    </div>

    <div class="col-12 col-sm-6">
      <label class="form-text">Initials</label>
      <div class="mb-3 mt-3">
        ______________________________
      </div>
    </div>
  </div>
  </span>

  {% endif %}
  {%- endmacro -%}

  <iframe id="upload_frame" name="upload_frame" style="display:none"></iframe>