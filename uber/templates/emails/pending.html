{% extends "base-admin.html" %}
{% block title %}Automated Emails Pending Approval{% endblock %}
{% block content %}

<h2>Email Categories</h2>
    
<table class="table table-striped" data-page-size="9999999">
<thead>
<tr class="header">
    <th>Subject</th>
    <th>Sender</th>
    <th>Number Sent</th>
    <th>Number Queued</th>
    <th>Examples</th>
    <th>Approval</th>
    <th>Date Condition</th>
</tr>
</thead>
<tbody>
{% for entry in automated_emails %}
    <tr>
        <td>{{ entry.automated_email.subject }}</td>
        <td>{{ entry.automated_email.sender }}</td>
        <td>{{ entry.num_sent }}</td>
        <td>{{ entry.automated_email.count_emails_not_sent_need_approval }}</td>
        <td><a href="pending_examples?subject={{ entry.automated_email.subject|urlencode }}">See Examples</a></td>
        <td>
            {% if not entry.approved %}
                <form method="post" action="approve">
                {% csrf_token %}
                <input type="hidden" name="subject" value="{{ entry.automated_email.subject }}" />
                <input type="submit" value="Approve" />
                </form>
            {% else %}
                {% if entry.doesnt_need_approval %}
                Automatic
                {% else %}
                Yes
                {% endif %}
            {% endif %}
        </td>
        <td>{{ entry.automated_email.when_txt|linebreaksbr }}</td>
    </tr>
{% endfor %}
</tbody>
</table>

{% endblock %}
