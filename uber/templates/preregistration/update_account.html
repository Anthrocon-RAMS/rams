{% import "forms/account.html" as account_fields with context %}
<button class="btn btn-info pull-left" type="button" data-bs-toggle="collapse" data-bs-target="#update-account" aria-expanded="false" aria-controls="update-account">
    <i class="fa fa-cog"></i> Account Settings
</button>
{% if c.PAGE_PATH != '/preregistration/homepage' %}
<a href="../preregistration/homepage" class="btn btn-primary">Go to Homepage</a>
{% endif %}
<a href="../preregistration/logout" class="btn btn-danger pull-right">
    <i class="fa fa-log-out"></i> Log Out
</a>
<div class="collapse" id="update-account">
    <div class="card-body">
        <form method="post" action="update_account" class="form-horizontal">
            {{ csrf_token() }}
            <input type="hidden" name="id" value="{{ homepage_account.id }}" />
            <div class="form-group">
                <label for="current_password" class="col-sm-3 control-label">Current Password</label>
                <div class="col-sm-6">
                    <input type="password" name="current_password" id="current_password" value="" class="form-control" placeholder="Enter account password to make changes" required>
                </div>
            </div>
            <hr>
            <div class="form-group">
                <label for="email" class="col-sm-3 control-label">Account Email</label>
                <div class="col-sm-6">
                    <input type="email" name="account_email" id="account_email" value="{{ homepage_account.email }}" class="form-control" placeholder="Account email address" required>
                </div>
            </div>
            <div class="form-group">
                <label for="new-password" class="col-sm-3 control-label">New Password</label>
                <div class="col-sm-6">
                    <input type="password" name="new_password" id="new-password" value="" class="form-control" placeholder="Leave blank to keep current password">
                </div>
                {{ account_fields.password_help }}
            </div>
            <div class="form-group">
                <label for="confirm-password" class="col-sm-3 control-label">Confirm New Password</label>
                <div class="col-sm-6">
                    <input type="password" name="confirm_password" id="confirm-password" value="" class="form-control" placeholder="Leave blank to keep current password">
                </div>
            </div>
            <div class="col-sm-9 col-sm-offset-3">
                <button type="submit" class="btn btn-primary" id="accountUpdateButton">
                Update Account Info
                </button>
            </div>
        </form>
    </div>
</div>

{{ account_fields.new_password_validation }}